<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Cobbler (v3.3.7) Windows Deployment Guide | Shane Logan </title> <meta name="author" content="Shane Logan"> <meta name="description" content="various detailed technical procedures. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://sus-admin.github.io/blog/2025/Cobbler-v3.3.7-Windows-Deployment-Guide/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Shane Logan </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/publications/">publications</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/projects/">projects</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/blog/">blog</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Cobbler (v3.3.7) Windows Deployment Guide</h1> <p class="post-meta"> Created in April 14, 2025 by Sus-Admin </p> <p class="post-tags"> <a href="/blog/2025"> <i class="fa-solid fa-calendar fa-sm"></i> 2025 </a>   ·   <a href="/blog/tag/cobbler"> <i class="fa-solid fa-hashtag fa-sm"></i> cobbler</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>This guide assumes that you have a Fedora 34 server or workstation system configured to run Cobbler v3.3.7 similarly to the <a href="/blog/2024/Cobbler-v3.3.6-Beginners-Guide/">Cobbler v3.3.6 Beginner’s guide</a>.</p> <h2 class="no_toc" id="table-of-contents">Table of Contents</h2> <ol id="markdown-toc"> <li> <a href="#objective" id="markdown-toc-objective">Objective</a> <ol> <li><a href="#caveats" id="markdown-toc-caveats">Caveats</a></li> </ol> </li> <li> <a href="#cobbler-server-prep" id="markdown-toc-cobbler-server-prep">Cobbler Server Prep</a> <ol> <li><a href="#dependencies" id="markdown-toc-dependencies">Dependencies</a></li> <li><a href="#cobbler-server-settings" id="markdown-toc-cobbler-server-settings">Cobbler Server Settings</a></li> </ol> </li> <li><a href="#windows-10-pxe-deployment" id="markdown-toc-windows-10-pxe-deployment">Windows 10 PXE Deployment</a></li> <li><a href="#windows-11-pxe-deployment" id="markdown-toc-windows-11-pxe-deployment">Windows 11 PXE Deployment</a></li> <li><a href="#tips--troubleshooting" id="markdown-toc-tips--troubleshooting">Tips &amp; Troubleshooting</a></li> </ol> <h2 id="objective">Objective</h2> <p>Starting where the <a href="/blog/2024/Cobbler-v3.3.6-Beginners-Guide/">Beginner’s guide</a> left off, further configure the Cobbler v3.3.7 server to deploy both Windows 10 and Windows 11 via PXE network boot, using the same system and network environment. This guide assumes that you still have <code class="language-plaintext highlighter-rouge">selinux</code> and <code class="language-plaintext highlighter-rouge">firewalld</code> configured and enabled as described in the Beginner’s guide.</p> <h3 id="caveats">Caveats</h3> <ol> <li> <p><strong>IMPORTANT:</strong> Issues were encountered running the PXE client as a VirtualBox VM with UEFI firmware, so instead it is recommended to run the PXE client on physical <em>(bare metal)</em> hardware or as a <a href="https://blogs.vmware.com/workstation/2024/05/vmware-workstation-pro-now-available-free-for-personal-use.html" rel="external nofollow noopener" target="_blank">VMWare Workstation/Fusion</a> or HyperV VM for UEFI installations.</p> <ul> <li> <p>More info on the issues encountered in the <strong>Tips &amp; Troubleshooting</strong> section below.</p> </li> <li> <p>If running the PXE client as a VMWare or HyperV VM it is recommended to also run the Cobbler Server under the same VM host or as a bare-metal server, using the same specs/settings as described in the <a href="/blog/2024/Cobbler-v3.3.6-Beginners-Guide/">Beginner’s guide</a>, as the network complexity of using different hypervisors would be beyond the scope of this guide.</p> </li> <li> <p>Your experience may differ depending on your hardware and Windows and VirtualBox software versions and settings.</p> </li> </ul> </li> <li> <p>This guide assumes you have already acquired the Windows 10 and 11 64-bit ISO installation files by using the <a href="https://www.microsoft.com/en-us/software-download/windows10" rel="external nofollow noopener" target="_blank">Windows 10</a> and <a href="https://www.microsoft.com/en-us/software-download/windows11" rel="external nofollow noopener" target="_blank">Windows 11</a> Media Creation Tool, which requires an existing Windows 10 or 11 system to create <em>(like the VirtualBox Host described in the <a href="/blog/2024/Cobbler-v3.3.6-Beginners-Guide/">Beginner’s guide</a>)</em></p> <ul> <li> <p>Also on the Windows 11 download page linked above is the minumum system requirements for installing Windows 11, which include UEFI Secure Boot and TPM support, making a <em>supported</em> installation to a VM an advanced topic beyond the scope of this guide.</p> <ul> <li>This guide will provide a workaround for those requirements as a proof of concept, but additional information on deploying via PXE with Secure Boot enabled can be found in Cobbler’s <a href="https://cobbler.readthedocs.io/en/v3.3.7/user-guide/wingen.html" rel="external nofollow noopener" target="_blank">official docs</a>.</li> </ul> </li> </ul> </li> </ol> <h2 id="cobbler-server-prep">Cobbler Server Prep</h2> <p>Enable the Windows support features as well as iPXE configs in Cobbler.</p> <h3 id="dependencies">Dependencies</h3> <p>Install some additional <a href="https://cobbler.readthedocs.io/en/v3.3.7/user-guide/wingen.html#installation-quickstart-guide" rel="external nofollow noopener" target="_blank">dependencies</a> required by Cobbler</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum <span class="nb">install</span> <span class="nt">-y</span> samba python-hivex python-pefile wimlib-utils python3-ldap openldap-servers openldap-clients
systemctl <span class="nb">enable </span>smb
</code></pre></div></div> <h3 id="cobbler-server-settings">Cobbler Server Settings</h3> <p>Enable Windows support in Cobbler’s settings, as well as ipxe, if not enabled already</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/windows_enabled: false/windows_enabled: true/'</span> /etc/cobbler/settings.d/windows.settings
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s/enable_ipxe: false/enable_ipxe: true/"</span> /etc/cobbler/settings.yaml
systemctl restart cobblerd
</code></pre></div></div> <p>Download the <code class="language-plaintext highlighter-rouge">wimboot</code> image from iPXE’s GitHub to the Cobbler <code class="language-plaintext highlighter-rouge">loaders</code> directory and sync cobbler</p> <ul> <li>Also, be sure to link the approriate bootloader images to the Cobbler <code class="language-plaintext highlighter-rouge">loaders</code> directory if not done already <em>(since the PXE software included with VMWare Workstation/Fusion and VirtualBox VMs do not support downloads via HTTP)</em>.</li> </ul> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://github.com/ipxe/wimboot/releases/latest/download/wimboot <span class="nt">-P</span> /var/lib/cobbler/loaders
<span class="nb">ln</span> <span class="nt">-s</span> /usr/share/ipxe/undionly.kpxe /var/lib/cobbler/loaders/.
<span class="nb">ln</span> <span class="nt">-s</span> /usr/share/ipxe/ipxe-x86_64.efi /var/lib/cobbler/loaders/.
<span class="nb">ln</span> <span class="nt">-s</span> /usr/share/ipxe/ipxe-snponly-x86_64.efi /var/lib/cobbler/loaders/.
cobbler <span class="nb">sync</span>
</code></pre></div></div> <p>Edit the <code class="language-plaintext highlighter-rouge">/etc/samba/smb.conf</code> file to match the below text-block</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[global]
        server role = standalone
        log level = 5
        load printers = no
        security = USER
        map to guest = Bad User
        guest account = nobody
[DISTRO]
        path = /var/www/cobbler
        public = yes
        browseable = yes
        writeable = no
        printable = no
</code></pre></div></div> <blockquote> <p>More info on this service and configuration in the <strong>Tips &amp; Troubleshooting</strong> section below</p> </blockquote> <p>Enable and start the smb service</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl <span class="nb">enable</span> <span class="nt">--now</span> smb
</code></pre></div></div> <p>Now, fix the <code class="language-plaintext highlighter-rouge">dhcp.template</code> file to properly detect PXE client firmware type during DHCP and enable iPXE chainloading for a more reliable experience on PXE clients.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s,filename "http://\\\$cobbler_server/cblr/svc/op/ipxe/system/\\\$iface.owner";,filename "http://\$cobbler_server/cblr/svc/op/ipxe/system/\$iface.owner";\\n            } else if exists system-arch and option system-arch = 00:07 {\\n                filename "ipxe-x86_64.efi";\\n            } else if exists system-arch and option system-arch = 00:08 {\\n                filename "ipxe-x86_64.efi";\\n            } else if exists system-arch and option system-arch = 00:09 {\\n                filename "ipxe-x86_64.efi";,'</span> /etc/cobbler/dhcp.template
</code></pre></div></div> <ul> <li> <p>The above command should edit the below <strong>original</strong> text block to match the following <strong>updated</strong> block in the resulting <code class="language-plaintext highlighter-rouge">dhcp.template</code> file:</p> <ul> <li> <p><strong>original</strong></p> <div class="language-plaintext highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>        #if $iface.enable_ipxe:
            if exists user-class and option user-class = "iPXE" {
                filename "http://$cobbler_server/cblr/svc/op/ipxe/system/$iface.owner";
            } else {
                filename "undionly.kpxe";
            }
        #end if
</code></pre></div> </div> </li> <li> <p><strong>updated</strong></p> <div class="language-plaintext highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>        #if $iface.enable_ipxe:
            if exists user-class and option user-class = "iPXE" {
                filename "http://$cobbler_server/cblr/svc/op/ipxe/system/$iface.owner";
            } else if exists system-arch and option system-arch = 00:07 {
                filename "ipxe-x86_64.efi";
            } else if exists system-arch and option system-arch = 00:08 {
                filename "ipxe-x86_64.efi";
            } else if exists system-arch and option system-arch = 00:09 {
                filename "ipxe-x86_64.efi";
            } else {
                filename "undionly.kpxe";
            }
        #end if
</code></pre></div> </div> </li> </ul> </li> </ul> <p>Finally, enable SELinux and Firewalld allowances for SMB server</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>setsebool <span class="nt">-P</span> samba_export_all_ro 1
setsebool <span class="nt">-P</span> cobbler_use_cifs 1

firewall-cmd <span class="nt">--permanent</span> <span class="nt">--zone</span><span class="o">=</span>cobbler <span class="nt">--add-service</span><span class="o">=</span>samba
firewall-cmd <span class="nt">--reload</span>
</code></pre></div></div> <h2 id="windows-10-pxe-deployment">Windows 10 PXE Deployment</h2> <p>mount the Windows 10 installation media and import the distro into cobbler:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> /mnt/Windows10
mount <span class="nt">-o</span> ro,loop ~/Downloads/Win10_22H2_English_x64.iso /mnt/Windows10
cobbler import <span class="nt">--name</span> Win10 <span class="nt">--path</span> /mnt/Windows10
</code></pre></div></div> <p><strong>Optional:</strong> <em>If</em> the PXE client will use legacy-BIOS firmware <em>(MBR partition scheme)</em> instead of UEFI, toggle <code class="language-plaintext highlighter-rouge">uefi</code> to <code class="language-plaintext highlighter-rouge">false</code> in the Cobbler Profile autoinstallation metadata:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cobbler profile edit <span class="nt">--name</span> Win10-x86_64 <span class="nt">--autoinstall-meta</span> <span class="s1">'uefi'</span><span class="o">=</span><span class="s1">'false'</span> <span class="nt">--in-place</span>
</code></pre></div></div> <blockquote> <p>More info in Cobbler’s <a href="https://cobbler.readthedocs.io/en/v3.3.7/user-guide/wingen.html" rel="external nofollow noopener" target="_blank">official docs</a>.</p> </blockquote> <p>Finally, create a new Cobbler System to PXE boot and automatically install Windows 10 Pro, replacing the <em>“aa:bb:cc:dd:ee:ff”</em> with the MAC address of your PXE client, being sure not to use a duplicate MAC or IP addresse of any other Cobbler System, then sync up Cobbler.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cobbler system add <span class="nt">--name</span> Win10 <span class="nt">--profile</span> Win10-x86_64 <span class="nt">--mac-address</span> <span class="s2">"aa:bb:cc:dd:ee:ff"</span> <span class="nt">--netboot-enabled</span> <span class="nb">true</span> <span class="nt">--enable-ipxe</span> <span class="nb">true
</span>cobbler <span class="nb">sync</span>
</code></pre></div></div> <p>The <strong>PXE Client</strong> VM can now be powered on, and should automatically boot to PXE and install Windows 10 to the VM HDD using the “autounattended.xml” answerfile template.</p> <h2 id="windows-11-pxe-deployment">Windows 11 PXE Deployment</h2> <p>First use the following commands to edit the <code class="language-plaintext highlighter-rouge">startnet.template</code> file in order to bypass Windows 11 hardware requirements for the PXE client.</p> <ul> <li>note that <code class="language-plaintext highlighter-rouge">unix2dos</code> will properly terminate the lines of text individually.</li> </ul> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">CMD1</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s1">'reg add HKLM\\SYSTEM\\Setup\\LabConfig /v BypassSecureBootCheck /t REG_DWORD /d 1 /f'</span> | unix2dos<span class="si">)</span>
<span class="nv">CMD2</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s1">'reg add HKLM\\SYSTEM\\Setup\\LabConfig /v BypassTPMCheck /t REG_DWORD /d 1 /f'</span> | unix2dos<span class="si">)</span>
<span class="nv">CMD3</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s1">'reg add HKLM\\SYSTEM\\Setup\\LabConfig /v BypassRAMCheck /t REG_DWORD /d 1 /f'</span> | unix2dos<span class="si">)</span>
<span class="nv">CMD4</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s1">'reg add HKLM\\SYSTEM\\Setup\\LabConfig /v BypassCPUCheck /t REG_DWORD /d 1 /f'</span> | unix2dos<span class="si">)</span>
<span class="nv">CMD5</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s1">'reg add HKLM\\SYSTEM\\Setup\\LabConfig /v BypassStorageCheck /t REG_DWORD /d 1 /f'</span> | unix2dos<span class="si">)</span>
<span class="nv">CMD6</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s1">'\$distro_share\\sources\\setup.exe \$unattended'</span> | unix2dos<span class="si">)</span>
<span class="nb">sudo sed</span> <span class="nt">-i</span> <span class="nt">-E</span> <span class="s2">"s,^#else.?</span><span class="nv">$,</span><span class="s2">#else if </span><span class="se">\$</span><span class="s2">os_version == </span><span class="se">\"</span><span class="s2">11</span><span class="se">\"\n</span><span class="k">${</span><span class="nv">CMD1</span><span class="k">}</span><span class="se">\n</span><span class="k">${</span><span class="nv">CMD2</span><span class="k">}</span><span class="se">\n</span><span class="k">${</span><span class="nv">CMD3</span><span class="k">}</span><span class="se">\n</span><span class="k">${</span><span class="nv">CMD4</span><span class="k">}</span><span class="se">\n</span><span class="k">${</span><span class="nv">CMD5</span><span class="k">}</span><span class="se">\n</span><span class="k">${</span><span class="nv">CMD6</span><span class="k">}</span><span class="se">\n</span><span class="s2">#else,"</span> /etc/cobbler/windows/startnet.template
</code></pre></div></div> <p>Now, take similar steps as with Windows 10 to import and automatically deploy Windows 11 Pro over PXE.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> /mnt/Windows11
mount <span class="nt">-o</span> ro,loop ~/Downloads/Win11_24H2_English_x64.iso /mnt/Windows11
cobbler import <span class="nt">--name</span> Win11 <span class="nt">--path</span> /mnt/Windows11
cobbler system add <span class="nt">--name</span> Win11 <span class="nt">--profile</span> Win11-x86_64 <span class="nt">--mac-address</span> <span class="s2">"aa:bb:cc:dd:ee:ff"</span> <span class="nt">--netboot-enabled</span> <span class="nb">true</span> <span class="nt">--enable-ipxe</span> <span class="nb">true
</span>cobbler <span class="nb">sync</span>
</code></pre></div></div> <p>The <strong>PXE Client</strong> VM can now be powered on, and should automatically boot to PXE and install Windows 11 to the VM HDD using the “autounattended.xml” answerfile template.</p> <h2 id="tips--troubleshooting">Tips &amp; Troubleshooting</h2> <ol> <li> <p>The <a href="/blog/2024/Cobbler-v3.3.6-Beginners-Guide/">Cobbler 3.3.6 Beginner’s Guide</a> <strong>Tips &amp; Troubleshooting</strong> section contains some basic recommendations and limitations of Cobbler which will not be repeated here.</p> </li> <li> <p><strong>VirtualBox Issues</strong></p> <ul> <li> <p>Specifially, the <code class="language-plaintext highlighter-rouge">ipxe-x86_64.efi</code> bootloader would fail to “initialize devices” and even though using the <code class="language-plaintext highlighter-rouge">ipxe-snponly-x86_64.efi</code> bootloader instead would load properly, the PXE client VM would <em>usually</em> just hang when downloading on of the WinPE files (i.e. <code class="language-plaintext highlighter-rouge">wimboot</code>, <code class="language-plaintext highlighter-rouge">boot.sdi</code>, <code class="language-plaintext highlighter-rouge">bootmgr.exe</code>, <code class="language-plaintext highlighter-rouge">bcd</code>, <code class="language-plaintext highlighter-rouge">winpe.wim</code>)</p> <ul> <li> <p>Tried several troubleshooting steps and could not get a consisten fix:</p> <ul> <li> <p>Tried different virtual network adapters.</p> <ul> <li>Using the “Paravirtualized Network (virtio-net)” adapter did resove this issue with the iPXE boot process and load into the WinPE/wimboot image successfully, but then did not detect any network adapters and failed to begin Window Setup, and further troubleshooting would be beyond the scope of this guide.</li> </ul> </li> <li> <p>Tried installing the appropriate VirtualBox Extensions for my version of VB.</p> </li> <li> <p>Disabled Memory Isolation in Windows Security on VirtualBox Host.</p> </li> <li> <p>Tried with and without “Virtual Machine Platform” and “Windows Hypervisor Platform” Windows Features installed/enabled.</p> </li> <li> <p>Found no relevant entries/errors in VirtualBox VM logs and nothing abnormal in Cobbler server logs (HTTP, TFTP, DHCP).</p> </li> </ul> </li> <li> <p>A live Windows OS installation can be converted from MBR (legacy-BIOS) to GPT (UEFI) via powershell commands, which can be used as a workaround for compatibility with VirtualBox VM UEFI firmware</p> <ul> <li>source: <a href="https://www.windowscentral.com/how-convert-mbr-disk-gpt-move-bios-uefi-windows-10" rel="external nofollow noopener" target="_blank">https://www.windowscentral.com/how-convert-mbr-disk-gpt-move-bios-uefi-windows-10</a>.</li> </ul> </li> </ul> </li> </ul> </li> <li> <p><strong>start-net.cmd issue</strong></p> <ul> <li> <p>The <code class="language-plaintext highlighter-rouge">smb</code> linux service used to host the installation files for the PXE client on the Cobbler server would be unresponsive during some installations, primarily when running the <code class="language-plaintext highlighter-rouge">startnet.cmd</code> script on the PXE client to start Windows Setup, which caused the installation to stall and error-out occasionally.</p> <ul> <li> <p>After reading through the manpage (<code class="language-plaintext highlighter-rouge">man smb.conf</code>) and trying several different configurations the problem persisted; make the following edit to the <code class="language-plaintext highlighter-rouge">startnet.template</code> file to account for this occasional unresponsiveness/lag from the SMB server when booting into setup by first probing the SMB share until it responds.</p> <div class="language-shell highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nv">CMD</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s1">'dir \$distros_dir || GOTO wno20'</span> | unix2dos<span class="si">)</span>
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s,net use z:,</span><span class="k">${</span><span class="nv">CMD</span><span class="k">}</span><span class="se">\n</span><span class="s2">net use z:,"</span> /etc/cobbler/windows/startnet.template
</code></pre></div> </div> </li> </ul> </li> </ul> </li> <li> <p>References</p> <ul> <li> <p><a href="https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/windows-setup-automation-overview?view=windows-11" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/windows-setup-automation-overview?view=windows-11</a></p> </li> <li> <p><a href="https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/automate-windows-setup?view=windows-11" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/automate-windows-setup?view=windows-11</a></p> </li> <li> <p><a href="https://learn.microsoft.com/en-us/windows-hardware/customize/desktop/unattend/" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows-hardware/customize/desktop/unattend/</a></p> </li> <li> <p><a href="https://learn.microsoft.com/en-us/windows-hardware/customize/desktop/wsim/answer-files-overview" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows-hardware/customize/desktop/wsim/answer-files-overview</a></p> </li> <li> <p><a href="https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/update-windows-settings-and-scripts-create-your-own-answer-file-sxs?view=windows-11" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/update-windows-settings-and-scripts-create-your-own-answer-file-sxs?view=windows-11</a></p> </li> <li> <p><a href="https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/windows-setup-log-files-and-event-logs?view=windows-11" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/windows-setup-log-files-and-event-logs?view=windows-11</a></p> </li> <li> <p><a href="https://learn.microsoft.com/en-us/windows-server/security/guarded-fabric-shielded-vm/guarded-fabric-sample-unattend-xml-file" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows-server/security/guarded-fabric-shielded-vm/guarded-fabric-sample-unattend-xml-file</a></p> </li> <li> <p><a href="https://learn.microsoft.com/en-us/windows-hardware/customize/desktop/oobexml-in-windows-11" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows-hardware/customize/desktop/oobexml-in-windows-11</a></p> </li> <li> <p><a href="https://learn.microsoft.com/en-us/windows-hardware/customize/desktop/customize-oobe-in-windows-11" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows-hardware/customize/desktop/customize-oobe-in-windows-11</a></p> </li> <li> <p><a href="https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/configure-oobexml?view=windows-11&amp;preserve-view=true" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/configure-oobexml?view=windows-11&amp;preserve-view=true</a></p> </li> <li> <p><a href="https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/oobexml-settings?view=windows-11" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/oobexml-settings?view=windows-11</a></p> </li> <li> <p><a href="https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/how-oobexml-works?view=windows-11" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/how-oobexml-works?view=windows-11</a></p> </li> <li> <p><a href="https://learn.microsoft.com/en-us/windows-hardware/customize/desktop/unattend/microsoft-windows-shell-setup-useraccounts" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows-hardware/customize/desktop/unattend/microsoft-windows-shell-setup-useraccounts</a></p> </li> <li> <p><a href="https://learn.microsoft.com/en-us/windows-hardware/customize/desktop/unattend/microsoft-windows-unattendedjoin-identification-joindomain" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows-hardware/customize/desktop/unattend/microsoft-windows-unattendedjoin-identification-joindomain</a></p> </li> <li> <p><a href="https://learn.microsoft.com/en-us/windows-hardware/customize/desktop/unattend/microsoft-windows-shell-setup-oobe-vmmodeoptimizations-skipadministratorprofileremoval" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows-hardware/customize/desktop/unattend/microsoft-windows-shell-setup-oobe-vmmodeoptimizations-skipadministratorprofileremoval</a></p> </li> <li> <p><a href="https://learn.microsoft.com/en-us/windows-hardware/customize/desktop/unattend/microsoft-windows-shell-setup-oobe-hideonlineaccountscreens" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows-hardware/customize/desktop/unattend/microsoft-windows-shell-setup-oobe-hideonlineaccountscreens</a></p> </li> <li> <p><a href="https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/windows-setup-log-files-and-event-logs" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/windows-setup-log-files-and-event-logs</a></p> </li> <li> <p><a href="https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/windows-setup-log-files-and-event-logs?view=windows-10" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/windows-setup-log-files-and-event-logs?view=windows-10</a></p> </li> <li> <p><a href="https://learn.microsoft.com/en-us/windows/deployment/configure-a-pxe-server-to-load-windows-pe" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows/deployment/configure-a-pxe-server-to-load-windows-pe</a></p> </li> <li> <p><a href="https://ipxe.org/howto/winpe" rel="external nofollow noopener" target="_blank">https://ipxe.org/howto/winpe</a></p> </li> <li> <p><a href="https://cobbler.readthedocs.io/en/latest/user-guide/wingen.html" rel="external nofollow noopener" target="_blank">https://cobbler.readthedocs.io/en/latest/user-guide/wingen.html</a></p> <ul> <li><a href="https://cobbler.readthedocs.io/en/latest/code-autodoc/cobbler.modules.html#module-cobbler.modules.sync_post_wingen" rel="external nofollow noopener" target="_blank">https://cobbler.readthedocs.io/en/latest/code-autodoc/cobbler.modules.html#module-cobbler.modules.sync_post_wingen</a></li> </ul> </li> <li> <p><a href="https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/winpe-intro?view=windows-10" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/winpe-intro?view=windows-10</a></p> </li> <li> <p><a href="https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/automate-windows-setup?view=windows-10" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/automate-windows-setup?view=windows-10</a></p> </li> <li> <p><a href="https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/windows-setup-automation-overview?view=windows-10#implicit-answer-file-search-order" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/windows-setup-automation-overview?view=windows-10#implicit-answer-file-search-order</a></p> </li> <li> <p><a href="https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/windows-setup-command-line-options?view=windows-10" rel="external nofollow noopener" target="_blank">https://learn.microsoft.com/en-us/windows-hardware/manufacture/desktop/windows-setup-command-line-options?view=windows-10</a></p> </li> </ul> </li> </ol> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Cobbler-v3.3.7-XCP-ng-Deployment-Guide/">Cobbler (v3.3.7) XCP-ng Deployment Guide</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Cobbler-v3.3.7-Ubuntu-Deployment-Guide/">Cobbler (v3.3.7) Ubuntu Deployment Guide</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Cobbler-v3.3.7-OpenSUSE-Deployment-Guide/">Cobbler (v3.3.7) OpenSUSE Deployment Guide</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Cobbler-v3.3.7-Debian-Deployment-Guide/">Cobbler (v3.3.7) Debian Deployment Guide</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Cobbler-v3.3.6-Beginners-Guide/">Cobbler v3.3.6 Beginner's Guide</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Shane Logan. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-blog",title:"blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"nav-publications",title:"publications",description:"publications by categories in reversed chronological order. generated by jekyll-scholar.",section:"Navigation",handler:()=>{window.location.href="/publications/"}},{id:"nav-projects",title:"projects",description:"A growing collection of your cool projects.",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"nav-repositories",title:"repositories",description:"Edit the `_data/repositories.yml` and change the `github_users` and `github_repos` lists to include your own GitHub profile and repositories.",section:"Navigation",handler:()=>{window.location.href="/repositories/"}},{id:"nav-cv",title:"cv",description:"This is a description of the page. You can modify it in '_pages/cv.md'. You can also change or remove the top pdf download button.",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"dropdown-publications",title:"publications",description:"",section:"Dropdown",handler:()=>{window.location.href=""}},{id:"dropdown-projects",title:"projects",description:"",section:"Dropdown",handler:()=>{window.location.href=""}},{id:"dropdown-blog",title:"blog",description:"",section:"Dropdown",handler:()=>{window.location.href="/blog/"}},{id:"post-cobbler-v3-3-7-windows-deployment-guide",title:"Cobbler (v3.3.7) Windows Deployment Guide",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/Cobbler-v3.3.7-Windows-Deployment-Guide/"}},{id:"post-cobbler-v3-3-7-xcp-ng-deployment-guide",title:"Cobbler (v3.3.7) XCP-ng Deployment Guide",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/Cobbler-v3.3.7-XCP-ng-Deployment-Guide/"}},{id:"post-cobbler-v3-3-7-ubuntu-deployment-guide",title:"Cobbler (v3.3.7) Ubuntu Deployment Guide",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/Cobbler-v3.3.7-Ubuntu-Deployment-Guide/"}},{id:"post-cobbler-v3-3-7-opensuse-deployment-guide",title:"Cobbler (v3.3.7) OpenSUSE Deployment Guide",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/Cobbler-v3.3.7-OpenSUSE-Deployment-Guide/"}},{id:"post-cobbler-v3-3-7-debian-deployment-guide",title:"Cobbler (v3.3.7) Debian Deployment Guide",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/Cobbler-v3.3.7-Debian-Deployment-Guide/"}},{id:"post-cobbler-v3-3-6-beginner-39-s-guide",title:"Cobbler v3.3.6 Beginner's Guide",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/Cobbler-v3.3.6-Beginners-Guide/"}},{id:"news-a-simple-inline-announcement",title:"A simple inline announcement.",description:"",section:"News"},{id:"news-a-long-announcement-with-details",title:"A long announcement with details",description:"",section:"News",handler:()=>{window.location.href="/news/announcement_2/"}},{id:"news-a-simple-inline-announcement-with-markdown-emoji-sparkles-smile",title:'A simple inline announcement with Markdown emoji! <img class="emoji" title=":sparkles:" alt=":sparkles:" src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png" height="20" width="20"> <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20">',description:"",section:"News"},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%73%68%61%6E%65%6C%6F%67%61%6E%34%36%38@%67%6D%61%69%6C.%63%6F%6D","_blank")}},{id:"socials-google-scholar",title:"Google Scholar",section:"Socials",handler:()=>{window.open("https://scholar.google.com/citations?user=qc6CJjYAAAAJ","_blank")}},{id:"socials-rss",title:"RSS Feed",section:"Socials",handler:()=>{window.open("/feed.xml","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>