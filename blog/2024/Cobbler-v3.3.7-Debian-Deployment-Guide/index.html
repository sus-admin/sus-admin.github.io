<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Cobbler (v3.3.7) Debian Deployment Guide | Shane Logan </title> <meta name="author" content="Shane Logan"> <meta name="description" content="various detailed technical procedures. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://sus-admin.github.io/blog/2024/Cobbler-v3.3.7-Debian-Deployment-Guide/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Shane Logan </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/publications/">publications</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/projects/">projects</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/blog/">blog</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Cobbler (v3.3.7) Debian Deployment Guide</h1> <p class="post-meta"> Created in December 02, 2024 by Sus-Admin </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/cobbler"> <i class="fa-solid fa-hashtag fa-sm"></i> cobbler</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>This guide assumes that you have a Fedora 34 server or workstation system configured to run Cobbler v3.3.7 similarly to the <a href="/blog/2024/Cobbler-v3.3.6-Beginners-Guide/">Cobbler v3.3.6 Beginner’s guide</a>.</p> <h2 class="no_toc" id="table-of-contents">Table of Contents</h2> <ol id="markdown-toc"> <li> <a href="#objective" id="markdown-toc-objective">Objective</a> <ol> <li><a href="#caveats" id="markdown-toc-caveats">Caveats</a></li> </ol> </li> <li> <a href="#cobbler-server-prep" id="markdown-toc-cobbler-server-prep">Cobbler Server Prep</a> <ol> <li><a href="#dependencies" id="markdown-toc-dependencies">Dependencies</a></li> </ol> </li> <li><a href="#debian-12-bookworm-pxe-deployment" id="markdown-toc-debian-12-bookworm-pxe-deployment">Debian 12 Bookworm PXE Deployment</a></li> <li><a href="#debian-11-bullseye-pxe-deployment" id="markdown-toc-debian-11-bullseye-pxe-deployment">Debian 11 Bullseye PXE Deployment</a></li> <li> <a href="#mirroring-with-debmirror" id="markdown-toc-mirroring-with-debmirror">Mirroring with debmirror</a> <ol> <li><a href="#setup-debmirror" id="markdown-toc-setup-debmirror">Setup debmirror</a></li> <li><a href="#manual-debmirror" id="markdown-toc-manual-debmirror">Manual debmirror</a></li> <li><a href="#cobbler-reposync-and-debmirror" id="markdown-toc-cobbler-reposync-and-debmirror">Cobbler reposync and debmirror</a></li> </ol> </li> <li><a href="#tips--troubleshooting" id="markdown-toc-tips--troubleshooting">Tips &amp; Troubleshooting</a></li> </ol> <h2 id="objective">Objective</h2> <p>Starting where the <a href="/blog/2024/Cobbler-v3.3.6-Beginners-Guide/">Beginner’s guide</a> left off, further configure the Cobbler v3.3.7 server to deploy the latest release of Debian 11 Bullseye and Debian 12 Bookworm <em>server</em> via PXE network boot, using the same system and network environment. This guide assumes that you still have <code class="language-plaintext highlighter-rouge">selinux</code> and <code class="language-plaintext highlighter-rouge">firewalld</code> configured and enabled as described in the Beginner’s guide.</p> <h3 id="caveats">Caveats</h3> <ul> <li> <p>Along the same lines as the <a href="/blog/2024/Cobbler-v3.3.6-Beginners-Guide/">Beginner’s guide</a> I prefer to locally host/mirror the base OS repo to alleviate public internet availability and bandwidth dependencies during network installations.</p> </li> <li> <p>using the <code class="language-plaintext highlighter-rouge">cobbler check</code> CLI command, the output recommends installing the <strong>debmirror</strong> package in order to manage Debian deployments and repos with Cobbler. Instead, we will simply import the Debian source installation media (.iso file), similarly to the <a href="/blog/2024/Cobbler-v3.3.6-Beginners-Guide/">Beginner’s guide</a>, and use that as the local repo mirror to install over the network.</p> <ul> <li> <p>This method is not the Cobbler official method, and Debian actually <a href="https://www.debian.org/mirror/ftpmirror" rel="external nofollow noopener" target="_blank">recommends</a> using something like “apt-cacher-ng” or “squid proxy”</p> </li> <li> <p>The Main Debian repo for the latest release of Debian is about 100 GB at the time of writing, which is why this is <em>my</em> preferred method over using <strong>debmirror</strong>, as it only requires the data from a single Debian installer DVD (.iso file)</p> <ul> <li>For completeness however, the <strong>debmirror</strong> method will be detailed towards the bottom of this guide, in the <strong>Mirroring with debmirror</strong> section.</li> </ul> </li> </ul> </li> <li> <p>This guide provides a workaround to an issue that is encountered when installing Debian 11 &amp; 12 over the network from a <strong>local/private repo</strong> where the PXE client (<code class="language-plaintext highlighter-rouge">debian-installer</code>) does not trust the installation source <em>(Since Debian developers DO NOT sign the software/repos packaged into official CD/DVD/ISO releases: <a href="https://wiki.debian.org/SecureApt" rel="external nofollow noopener" target="_blank">https://wiki.debian.org/SecureApt</a> )</em>.</p> <ul> <li> <p>This appears to be a bug in the <code class="language-plaintext highlighter-rouge">debian-installer</code> (<code class="language-plaintext highlighter-rouge">d-i</code>); more info provided in the <strong>Tips &amp; Troubleshooting</strong> section below.</p> </li> <li> <p>This issue should not arise when mirroring an official Debian mirror using the <strong>debmirror</strong> method, as recommended by Cobbler</p> </li> </ul> </li> </ul> <h2 id="cobbler-server-prep">Cobbler Server Prep</h2> <p>Debian maintainers advise that network booting Debian is <a href="https://www.debian.org/distrib/netinst#netboot" rel="external nofollow noopener" target="_blank">not for novice users</a>, and they’re not wrong, but we’re no amateurs.</p> <p>That said, continue at your own risk.</p> <h3 id="dependencies">Dependencies</h3> <p>Download the latest releases of Debian Bookworm and Bullseye</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/Downloads <span class="o">&amp;&amp;</span> wget https://cdimage.debian.org/debian-cd/current/amd64/iso-dvd/debian-12.8.0-amd64-DVD-1.iso
<span class="nb">cd</span> ~/Downloads <span class="o">&amp;&amp;</span> wget https://cdimage.debian.org/mirror/cdimage/archive/11.11.0/amd64/iso-dvd/debian-11.11.0-amd64-DVD-1.iso
</code></pre></div></div> <p>Additionally, all Debian releases at the time of writing require the “netboot” initial ramdisk (<code class="language-plaintext highlighter-rouge">initrd</code>) provided separately by the Debian maintainers in order to properly boot over the network. Furthermore, Debian 11 Bullseye and earlier require the “netboot firmware” image, which is an extension to the netboot <code class="language-plaintext highlighter-rouge">initrd</code> image containing drivers for non-free firmware, also provided separately by Debian.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget <span class="nt">-O</span> ~/Downloads/Debian12.8-netboot.gz https://ftp.debian.org/debian/dists/stable/main/installer-amd64/current/images/netboot/debian-installer/amd64/initrd.gz

wget <span class="nt">-O</span> ~/Downloads/Debian11.11-netboot.gz  https://ftp.debian.org/debian/dists/bullseye/main/installer-amd64/current/images/netboot/debian-installer/amd64/initrd.gz
wget <span class="nt">-O</span> ~/Downloads/Debian11.11-firmware.gz https://cdimage.debian.org/cdimage/firmware/bullseye/current/firmware.cpio.gz
</code></pre></div></div> <blockquote> <p>The netboot <code class="language-plaintext highlighter-rouge">initrd.gz</code> file above is not maintained in the same manner as the main Debian installation media; only the netboot <code class="language-plaintext highlighter-rouge">initrd.gz</code> image corresponding to the LATEST official release of Debian for any major version (bookworm, bullseye, etc…) will be available on the official <a href="https://ftp.debian.org/debian/dists/" rel="external nofollow noopener" target="_blank">FTP site</a> above, and not the cdimage <a href="https://cdimage.debian.org/debian-cd/current" rel="external nofollow noopener" target="_blank">repo</a> or <a href="https://cdimage.debian.org/cdimage/archive/" rel="external nofollow noopener" target="_blank">archive</a> where the .iso images are acquired from (the images CAN be found on the Debian repo <a href="https://snapshot.debian.org/archive/debian/" rel="external nofollow noopener" target="_blank">snapshot archive</a>, but you’ll have to correlate the date with the appropriate release).</p> <p>All previous releases of the netboot <code class="language-plaintext highlighter-rouge">firmware.cpio.gz</code> image ARE available on the official <a href="https://cdimage.debian.org/cdimage/firmware/bullseye/" rel="external nofollow noopener" target="_blank">cdimage archive</a> at the time of writing.</p> <p>Newer releases of the netboot <code class="language-plaintext highlighter-rouge">initrd.gz</code> and firmware images will not be compatible with previous releases of Debian, as they use different kernel and module versions.</p> </blockquote> <p>Create a GPG key to sign the local Debian repo mirror, and then export the public key to the public HTTP share on the Cobbler server and restore the SELinux labels.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gpg <span class="nt">--full-gen-key</span> <span class="nt">--batch</span> &lt;<span class="o">(</span><span class="nb">echo</span> <span class="s2">"Key-Type: 1"</span><span class="p">;</span> <span class="se">\</span>
                             <span class="nb">echo</span> <span class="s2">"Key-Length: 4096"</span><span class="p">;</span> <span class="se">\</span>
                             <span class="nb">echo</span> <span class="s2">"Subkey-Type: 1"</span><span class="p">;</span> <span class="se">\</span>
                             <span class="nb">echo</span> <span class="s2">"Subkey-Length: 4096"</span><span class="p">;</span> <span class="se">\</span>
                             <span class="nb">echo</span> <span class="s2">"Expire-Date: 0"</span><span class="p">;</span> <span class="se">\</span>
                             <span class="nb">echo</span> <span class="s2">"Name-Real: cobbler"</span><span class="p">;</span> <span class="se">\</span>
                             <span class="nb">echo</span> <span class="s2">"Name-Email: cobbler@fedora.local"</span><span class="p">;</span> <span class="se">\</span>
                             <span class="nb">echo</span> <span class="s2">"%no-protection"</span><span class="p">;</span> <span class="o">)</span>

gpg <span class="nt">--output</span> /var/www/cobbler/pub/cobbler.gpg.asc <span class="nt">--armor</span> <span class="nt">--export</span> cobbler
restorecon <span class="nt">-R</span> /var/www/cobbler/pub
</code></pre></div></div> <blockquote> <p>for simplicity, this GPG key will not be password protected. This is against cyber-security best practices and should only be implemented in a test environment.</p> </blockquote> <h2 id="debian-12-bookworm-pxe-deployment">Debian 12 Bookworm PXE Deployment</h2> <p>mount the Debian 12 Bookworm installation media and import the distro into cobbler:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span> <span class="nt">-e</span> /mnt/Debian <span class="o">]</span> <span class="o">||</span> <span class="nb">mkdir</span> /mnt/Debian
mount <span class="nt">-t</span> iso9660 <span class="nt">-o</span> loop,ro ~/Downloads/debian-12.8.0-amd64-DVD-1.iso /mnt/Debian
cobbler import <span class="nt">--name</span> Debian12.8 <span class="nt">--path</span> /mnt/Debian
</code></pre></div></div> <p>Navigate to the imported distro mirror and sign the repo:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> /var/www/cobbler/distro_mirror/Debian12.8/dists/bookworm
gpg <span class="nt">-u</span> cobbler <span class="nt">-bao</span> Release.gpg Release
gpg <span class="nt">-u</span> cobbler <span class="nt">--clear-sign</span> <span class="nt">--output</span> InRelease Release
</code></pre></div></div> <p>Concatenate the two <code class="language-plaintext highlighter-rouge">initrd.gz</code> images in the following order, then configure the new Cobbler Distro to use the combined image:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> /var/www/cobbler/distro_mirror/Debian12.8/install.amd/initrd.gz ~/Downloads/Debian12.8-netboot.gz <span class="o">&gt;</span> /var/www/cobbler/pub/Debian12.8-netboot.gz

cobbler distro edit <span class="nt">--name</span> Debian12.8-x86_64 <span class="nt">--initrd</span> <span class="s2">"/var/www/cobbler/pub/Debian12.8-netboot.gz"</span>
</code></pre></div></div> <p>Create a new “preseed” (autoinstall) template from the sample included with Cobbler, and make the necessary changes to install from an unofficial source.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cp</span> /var/lib/cobbler/templates/sample.seed /var/lib/cobbler/templates/bookworm-workaround.seed
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s,# d-i debian-installer/allow_unauthenticated boolean true,d-i debian-installer/allow_unauthenticated boolean true,'</span> /var/lib/cobbler/templates/bookworm-workaround.seed
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s,# d-i apt-setup/local0/key string http://local.server/key,d-i apt-setup/local0/repository string http://$http_server$install_source_directory\nd-i apt-setup/local0/key string http://$http_server/cblr/pub/cobbler.gpg.asc,'</span> /var/lib/cobbler/templates/bookworm-workaround.seed
</code></pre></div></div> <blockquote> <p>This is where the bug mentioned in the <strong>Caveats</strong> section above is introduced. The <code class="language-plaintext highlighter-rouge">apt-setup/local0/key</code> preseed value <em>should</em> allow us to provide the <code class="language-plaintext highlighter-rouge">debian-installer</code> with a GPG key to validate the installation source, but the installation always fails without the <strong>workaround</strong> detailed below.</p> <p>When the <strong>workaround</strong> is implemented, the installation completes successfully and the resulting system’s installation log always has an entry like <code class="language-plaintext highlighter-rouge">Downloading local repository key failed</code>.</p> <p>Still, confugre it to retrieve the key over HTTP anyway, just in case.</p> </blockquote> <p>Use the standard <code class="language-plaintext highlighter-rouge">preseed_early_default</code> Cobbler Script to create a new Cobbler Script which will implement the <strong><em>workaround</em></strong> to be run on the PXE client to circumvent the bug mentioned in the <strong>Caveats</strong> section above:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-v</span> <span class="s1">'# End preseed_early_default'</span> /var/lib/cobbler/scripts/preseed_early_default | <span class="nb">tee</span> /var/lib/cobbler/scripts/preseed_early_workaround

<span class="nb">echo</span> <span class="s1">'while true; do
	[ -d /target/etc/apt/trusted.gpg.d ] &amp;&amp; cd /target/etc/apt/trusted.gpg.d &amp;&amp; fetch-url http://$http_server/cblr/pub/cobbler.gpg.asc cobbler.gpg.asc &amp;&amp; exit;
	echo nope;
	sleep 1;
done 2&gt; /dev/null 1&gt; /dev/null &amp;
# End preseed_early_default'</span> | <span class="nb">tee</span> <span class="nt">-a</span> /var/lib/cobbler/scripts/preseed_early_workaround
</code></pre></div></div> <p>Create another preseed script (from the standard <code class="language-plaintext highlighter-rouge">preseed_late_default</code> Cobbler Script) to run in the post-installation stage which will grant sudo privileges to the “debian” user (created below) and reconfigure the installed system to use Debian’s official APT sources instead of the local Cobbler server.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-v</span> <span class="s1">'# End preseed_late_default'</span> /var/lib/cobbler/scripts/preseed_late_default | <span class="nb">tee</span> /var/lib/cobbler/scripts/preseed_late_bookworm

<span class="nb">echo</span> <span class="s2">"sed -i 's,#PermitRootLogin prohibit-password,PermitRootLogin no,' /etc/ssh/sshd_config
usermod -aG sudo debian
sed -i 's,^,#,' /etc/apt/sources.list
echo 'deb http://deb.debian.org/debian bookworm main non-free-firmware non-free contrib' &gt;&gt; /etc/apt/sources.list
echo 'deb-src http://deb.debian.org/debian bookworm main non-free-firmware non-free contrib' &gt;&gt; /etc/apt/sources.list
echo 'deb http://security.debian.org/debian-security bookworm-security main non-free-firmware non-free contrib' &gt;&gt; /etc/apt/sources.list
echo 'deb-src http://security.debian.org/debian-security bookworm-security main non-free-firmware non-free contrib' &gt;&gt; /etc/apt/sources.list
echo 'deb http://deb.debian.org/debian bookworm-updates main non-free-firmware non-free contrib' &gt;&gt; /etc/apt/sources.list
echo 'deb-src http://deb.debian.org/debian bookworm-updates main non-free-firmware non-free contrib' &gt;&gt; /etc/apt/sources.list
# End preseed_late_default"</span> | <span class="nb">tee</span> <span class="nt">-a</span> /var/lib/cobbler/scripts/preseed_late_bookworm
</code></pre></div></div> <p>Modify the new preseed (autoinstall) template to install desired packages only, setup an additional user “debian”, set the workaround script created above to run in the “early” installation stage, and the “preseed_late” script to run in the late stage, and more aggressively force the installation regardless of any existing installations.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s,ntp ssh wget,wget curl openssh-server sudo vim\npopularity-contest popularity-contest/participate boolean false,'</span> /var/lib/cobbler/templates/bookworm-workaround.seed
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s,# d-i apt-setup/services-select multiselect security,d-i apt-setup/services-select multiselect,'</span> /var/lib/cobbler/templates/bookworm-workaround.seed
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s,d-i partman-auto/method string lvm,d-i partman-efi/non_efi_system boolean true\nd-i partman-auto/method string lvm,'</span> /var/lib/cobbler/templates/bookworm-workaround.seed
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s,d-i grub-installer/bootdev string default,d-i grub-installer/bootdev string default\nd-i grub-installer/with_other_os boolean true\nd-i grub-installer/force-efi-extra-removable boolean false\nd-i grub-installer/enable_os_prober_otheros_yes boolean false\nd-i grub-installer/enable_os_prober_otheros_no boolean true,'</span> /var/lib/cobbler/templates/bookworm-workaround.seed
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s,d-i passwd/make-user boolean false,d-i passwd/make-user boolean true\nd-i passwd/user-fullname string Debian Admin\nd-i passwd/username string debian\nd-i passwd/user-password-crypted password $default_password_crypted,'</span> /var/lib/cobbler/templates/bookworm-workaround.seed
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s,script=preseed_early_default,script=preseed_early_workaround,'</span> /var/lib/cobbler/templates/bookworm-workaround.seed
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s,script=preseed_late_default,script=preseed_late_bookworm,'</span> /var/lib/cobbler/templates/bookworm-workaround.seed
</code></pre></div></div> <p>Configure the Cobbler Profile to use the new autoinstall (preseed) template:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cobbler profile edit <span class="nt">--name</span> Debian12.8-x86_64 <span class="nt">--autoinstall</span> <span class="s1">'bookworm-workaround.seed'</span>
</code></pre></div></div> <p>Finally, create a new Cobbler System to PXE boot and automatically install Debian 12 Bookworm, replacing the <em>“aa:bb:cc:dd:ee:ff”</em> with the MAC address of your PXE client, being sure not to use a duplicate MAC or IP addresse of any other Cobbler System, then sync up Cobbler.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cobbler system add <span class="nt">--name</span> <span class="s2">"Debian12.8"</span> <span class="nt">--profile</span> Debian12.8-x86_64 <span class="nt">--hostname</span> <span class="s2">"debian12-8"</span> <span class="nt">--mac-address</span> <span class="s2">"aa:bb:cc:dd:ee:ff"</span> <span class="nt">--netboot-enabled</span> <span class="nb">true</span> <span class="nt">--ip-address</span> <span class="s2">"10.0.0.12"</span> <span class="nt">--netmask</span> <span class="s2">"255.255.255.0"</span> <span class="nt">--gateway</span> <span class="s2">"10.0.0.1"</span> <span class="nt">--name-servers</span> <span class="s2">"10.0.0.1 1.1.1.1 8.8.8.8"</span>
cobbler <span class="nb">sync</span>
</code></pre></div></div> <p>The <strong>PXE Client</strong> VM can now be powered on, and should automatically boot to PXE and install Debian 12.8 to the VM HDD using the “bookworm-workaround.seed” preseed template created above.</p> <h2 id="debian-11-bullseye-pxe-deployment">Debian 11 Bullseye PXE Deployment</h2> <p>Take similar steps as above, with the inclusion of the netboot “firmware” image file in the combined <code class="language-plaintext highlighter-rouge">initrd.gz</code> image file, and using the “bookworm-workaround.seed” template created above as a starting point and trimming off a few unsupported preseed settings to import and automatically deploy Debian 11 Bullseye over PXE.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span> <span class="nt">-e</span> /mnt/Debian <span class="o">]</span> <span class="o">||</span> <span class="nb">mkdir</span> /mnt/Debian
mount <span class="nt">-t</span> iso9660 <span class="nt">-o</span> loop,ro ~/Downloads/debian-11.11.0-amd64-DVD-1.iso /mnt/Debian
cobbler import <span class="nt">--name</span><span class="o">=</span>Debian11.11 <span class="nt">--path</span><span class="o">=</span>/mnt/Debian

<span class="nb">cd</span> /var/www/cobbler/distro_mirror/Debian11.11/dists/bullseye
gpg <span class="nt">-u</span> cobbler <span class="nt">-bao</span> Release.gpg Release
gpg <span class="nt">-u</span> cobbler <span class="nt">--clear-sign</span> <span class="nt">--output</span> InRelease Release

<span class="nb">cat</span> /var/www/cobbler/distro_mirror/Debian11.11/install.amd/initrd.gz ~/Downloads/Debian11.11-netboot.gz ~/Downloads/Debian11.11-firmware.gz <span class="o">&gt;</span> /var/www/cobbler/pub/Debian11.11-netboot.gz
cobbler distro edit <span class="nt">--name</span> Debian11.11-x86_64 <span class="nt">--initrd</span> <span class="s2">"/var/www/cobbler/pub/Debian11.11-netboot.gz"</span>

<span class="nb">sed</span> <span class="s1">'s,bookworm,bullseye,'</span> /var/lib/cobbler/scripts/preseed_late_bookworm <span class="o">&gt;</span> /var/lib/cobbler/scripts/preseed_late_bullseye
<span class="nb">grep</span> <span class="nt">-v</span> <span class="s2">"os_prober"</span> /var/lib/cobbler/templates/bookworm-workaround.seed | <span class="nb">sed</span> <span class="s1">'s,preseed_late_bookworm,preseed_late_bullseye,'</span> <span class="o">&gt;</span> /var/lib/cobbler/templates/bullseye-workaround.seed
cobbler profile edit <span class="nt">--name</span> Debian11.11-x86_64 <span class="nt">--autoinstall</span> bullseye-workaround.seed

cobbler system add <span class="nt">--name</span> Debian11.11 <span class="nt">--profile</span> Debian11.11-x86_64 <span class="nt">--mac-address</span> <span class="s2">"aa:bb:cc:dd:ee:ff"</span> <span class="nt">--netboot-enabled</span> <span class="nb">true

</span>cobbler <span class="nb">sync</span>
</code></pre></div></div> <h2 id="mirroring-with-debmirror">Mirroring with debmirror</h2> <p>Mirroring the official Debian repos with the <strong>debmirror</strong> tool is fairly simple, but will require about 100GB of extra disk space on the Cobbler server.</p> <p>This guide will only provide the steps to mirror the LATEST release of Debian <em>(Bookworm 12.8 at the time of writing)</em> with <code class="language-plaintext highlighter-rouge">debmirror</code>.</p> <p>similarly to the DVD/ISO method above, both the <strong>netboot</strong> and <strong>DVD/ISO</strong> <code class="language-plaintext highlighter-rouge">initrd.gz</code> images are still required in the same concatenated manner to properly install over the network, but they must both be downloaded separately of the <code class="language-plaintext highlighter-rouge">debmirror</code> process.</p> <p>Since the official Debian repo will be mirrored, the source will be fully valid with trusted signatures, meaning the autoinstall (preseed) file for the PXE client will not need the APT security settings required in the DVD/ISO source method.</p> <p>Cobbler supports managing repos/sources via the debmirror command natively, which means the <code class="language-plaintext highlighter-rouge">debmirror</code> package only needs to be installed and configured, then mirroring can be accomplished/managed through Cobbler CLI commands.</p> <ul> <li>The syntax for mirroring a Debian repo through the <code class="language-plaintext highlighter-rouge">debmirror</code> command will still be provided below for context in the <strong>Manual debmirror</strong> section, but is not necessary in most cases to mirror Debian locally.</li> </ul> <h3 id="setup-debmirror">Setup debmirror</h3> <p>Follow the instructions given from the <code class="language-plaintext highlighter-rouge">cobbler check</code> command for supporting Debian deployments/repos and install the Debian keyrings:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum <span class="nb">install</span> <span class="nt">-y</span> debmirror debian-keyring
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s/@arches/#@arches/g"</span> /etc/debmirror.conf
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s/@dists/#@dists/g"</span> /etc/debmirror.conf
cobbler <span class="nb">sync
</span>cobbler check
</code></pre></div></div> <h3 id="manual-debmirror">Manual debmirror</h3> <p>Sometimes debmirror may fail to download a few files from the configured source, which can cause Cobbler to error out on the <code class="language-plaintext highlighter-rouge">reposync</code> task/command.</p> <ul> <li>Usually re-issueing the <code class="language-plaintext highlighter-rouge">reposync</code> command (and in-turn, the <code class="language-plaintext highlighter-rouge">debmirror</code> command) after such a failure will complete the download of the missing files.</li> </ul> <p>This manual <code class="language-plaintext highlighter-rouge">debmirror</code> method may be useful for troubleshooting</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>debmirror <span class="nt">-p</span> <span class="nt">-v</span> <span class="nt">--method</span> http <span class="nt">-a</span> amd64 <span class="nt">-h</span> ftp.us.debian.org <span class="nt">-d</span> stable <span class="nt">-s</span> main,main/debian-installer,contrib,non-free,non-free-firmware <span class="nt">--nosource</span> <span class="nt">--keyring</span><span class="o">=</span><span class="s2">"/usr/share/keyrings/debian-archive-keyring.gpg"</span>  ~/Debian12.8
</code></pre></div></div> <h3 id="cobbler-reposync-and-debmirror">Cobbler reposync and debmirror</h3> <p>use the <code class="language-plaintext highlighter-rouge">cobbler repo</code> and <code class="language-plaintext highlighter-rouge">cobbler reposync</code> commands in order to mirror Debian latest repo locally:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cobbler repo add <span class="nt">--name</span> Debian-latest <span class="nt">--keep-updated</span> <span class="nb">true</span> <span class="nt">--mirror-locally</span> <span class="nb">true</span> <span class="nt">--breed</span> apt <span class="nt">--arch</span> x86_64 <span class="nt">--mirror</span> <span class="s2">"http://ftp.us.debian.org/debian"</span> <span class="nt">--apt-components</span><span class="o">=</span>main,main/debian-installer,non-free-firmware <span class="nt">--apt-dists</span><span class="o">=</span>bookworm <span class="nt">--yumopts</span> <span class="s1">'--keyring'</span><span class="o">=</span><span class="s1">'/usr/share/keyrings/debian-archive-keyring.gpg'</span>
cobbler reposync
</code></pre></div></div> <p>Configure a new preseed file for installation via the trusted, signed Debian repo:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cp</span> /var/lib/cobbler/templates/bookworm-workaround.seed /var/lib/cobbler/templates/bookworm-latest.seed
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s,d-i apt-setup/local0/repository,#d-i apt-setup/local0/repository,'</span> /var/lib/cobbler/templates/bookworm-latest.seed
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s,d-i apt-setup/local0/key,#d-i apt-setup/local0/key,'</span> /var/lib/cobbler/templates/bookworm-latest.seed
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s,d-i debian-installer/allow_unauthenticated,#d-i debian-installer/allow_unauthenticated,'</span> /var/lib/cobbler/templates/bookworm-latest.seed
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s,script=preseed_early_workaround,script=preseed_early_default,'</span> /var/lib/cobbler/templates/bookworm-latest.seed
</code></pre></div></div> <p>Download the kernel and 2 initrd files for Debiain latest/current (12.8)</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget <span class="nt">-O</span> ~/Downloads/debian-stable-initrd.gz http://ftp.us.debian.org/debian/dists/stable/main/installer-amd64/current/images/cdrom/initrd.gz
wget <span class="nt">-O</span> ~/Downloads/debian-stable-netboot-initrd.gz http://ftp.us.debian.org/debian/dists/stable/main/installer-amd64/current/images/netboot/debian-installer/amd64/initrd.gz
wget <span class="nt">-O</span> ~/Downloads/debian-stable-vmlinuz http://ftp.us.debian.org/debian/dists/stable/main/installer-amd64/current/images/cdrom/vmlinuz
<span class="nb">mkdir</span> /var/www/cobbler/pub/Debian12.8-netboot
<span class="nb">cat</span> ~/Downloads/debian-stable-initrd.gz ~/Downloads/debian-stable-netboot-initrd.gz <span class="o">&gt;</span> /var/www/cobbler/pub/Debian12.8-netboot/initrd.gz
<span class="nb">cp</span> ~/Downloads/debian-stable-vmlinuz /var/www/cobbler/pub/Debian12.8-netboot/vmlinuz
</code></pre></div></div> <p>Add a Cobbler Distro and Profile for the new Debian repo, and the usual HTTP link:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cobbler distro add <span class="nt">--name</span> Debian-latest <span class="nt">--arch</span> x86_64 <span class="nt">--autoinstall-meta</span> <span class="s1">'tree'</span><span class="o">=</span><span class="s1">'http://@@http_server@@/cblr/links/Debian-latest'</span> <span class="nt">--breed</span> debian <span class="nt">--os-version</span> bookworm <span class="nt">--initrd</span> <span class="s2">"/var/www/cobbler/pub/Debian12.8-netboot/initrd.gz"</span> <span class="nt">--kernel</span> <span class="s2">"/var/www/cobbler/pub/Debian12.8-netboot/vmlinuz"</span>
cobbler profile add <span class="nt">--name</span> Debian-latest <span class="nt">--distro</span> Debian-latest <span class="nt">--autoinstall</span> bookworm-latest.seed
<span class="nb">ln</span> <span class="nt">-s</span> /var/www/cobbler/repo_mirror/Debian-latest /var/www/cobbler/links/Debian-latest
cobbler <span class="nb">sync</span>
</code></pre></div></div> <p>Now the <strong>PXE Client</strong> should be able to boot from a generic/random MAC address and load the new “Debian-latest” Cobbler Profile over GRUB</p> <blockquote> <p>Cobbler Systems can now also be added similarly to above in the <strong>Debian 12 Bookworm PXE Deployment</strong> and <strong>Debian 11 Bullseye PXE Deployment</strong> sections above.</p> <div class="language-shell highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>cobbler system add <span class="nt">--name</span> Debian-Latest <span class="nt">--profile</span> Debian-latest <span class="nt">--mac-address</span> <span class="s2">"aa:bb:cc:dd:ee:ff"</span> <span class="nt">--netboot-enabled</span> <span class="nb">true</span>
</code></pre></div> </div> </blockquote> <h2 id="tips--troubleshooting">Tips &amp; Troubleshooting</h2> <ol> <li> <p>The <a href="/blog/2024/Cobbler-v3.3.6-Beginners-Guide/">Cobbler 3.3.6 Beginner’s Guide</a> <strong>Tips &amp; Troubleshooting</strong> section contains some basic recommendations and limitations of Cobbler which will not be repeated here.</p> </li> <li> <p>The <code class="language-plaintext highlighter-rouge">debian-installer</code> issue mentioned in the <strong>Caveats</strong> section above is primarily marked by a fatal error during the installation process and the log entry <code class="language-plaintext highlighter-rouge">GPG error</code> in <code class="language-plaintext highlighter-rouge">/var/log/syslog</code> on the installer system, or, if the workaround script was used, you can install the <code class="language-plaintext highlighter-rouge">debconf-utils</code> package on the resulting system and use the command <code class="language-plaintext highlighter-rouge">debconf-get-selections --installer | grep "Downloading"</code> for more info on the error.</p> <ul> <li> <p>The error prevents the installation from proceeding using the configured repo mirror, but the <code class="language-plaintext highlighter-rouge">debian-installer</code> remains running; press <strong>ALT+F2</strong> or <strong>ALT+F3</strong> on the PXE client keyboard to access a privileged shell to conduct some troubleshooting.</p> </li> <li> <p>The issue stems from the below section of the preseed file, retrieved drectly from Debian’s official <a href="https://www.debian.org/releases/stable/example-preseed.txt" rel="external nofollow noopener" target="_blank">stable</a> and <a href="https://www.debian.org/releases/bookworm/example-preseed.txt" rel="external nofollow noopener" target="_blank">bookworm</a> example preseed files.</p> <div class="language-shell highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="c">### Apt setup</span>
<span class="c"># Choose, if you want to scan additional installation media</span>
<span class="c"># (default: false).</span>
d-i apt-setup/cdrom/set-first boolean <span class="nb">false</span>
<span class="c"># You can choose to install non-free firmware.</span>
<span class="c">#d-i apt-setup/non-free-firmware boolean true</span>
<span class="c"># You can choose to install non-free and contrib software.</span>
<span class="c">#d-i apt-setup/non-free boolean true</span>
<span class="c">#d-i apt-setup/contrib boolean true</span>
<span class="c"># Uncomment the following line, if you don't want to have the sources.list</span>
<span class="c"># entry for a DVD/BD installation image active in the installed system</span>
<span class="c"># (entries for netinst or CD images will be disabled anyway, regardless of</span>
<span class="c"># this setting).</span>
<span class="c">#d-i apt-setup/disable-cdrom-entries boolean true</span>
<span class="c"># Uncomment this if you don't want to use a network mirror.</span>
<span class="c">#d-i apt-setup/use_mirror boolean false</span>
<span class="c"># Select which update services to use; define the mirrors to be used.</span>
<span class="c"># Values shown below are the normal defaults.</span>
<span class="c">#d-i apt-setup/services-select multiselect security, updates</span>
<span class="c">#d-i apt-setup/security_host string security.debian.org</span>
      
<span class="c"># Additional repositories, local[0-9] available</span>
<span class="c">#d-i apt-setup/local0/repository string \</span>
<span class="c">#       http://local.server/debian stable main</span>
<span class="c">#d-i apt-setup/local0/comment string local server</span>
<span class="c"># Enable deb-src lines</span>
<span class="c">#d-i apt-setup/local0/source boolean true</span>
<span class="c"># URL to the public key of the local repository; you must provide a key or</span>
<span class="c"># apt will complain about the unauthenticated repository and so the</span>
<span class="c"># sources.list line will be left commented out.</span>
<span class="c">#d-i apt-setup/local0/key string http://local.server/key</span>
<span class="c"># or one can provide it in-line by base64 encoding the contents of the</span>
<span class="c"># key file (with `base64 -w0`) and specifying it thus:</span>
<span class="c">#d-i apt-setup/local0/key string base64://LS0tLS1CRUdJTiBQR1AgUFVCTElDIEtFWSBCTE9DSy0tLS0tCi4uLgo=</span>
<span class="c"># The content of the key file is checked to see if it appears to be ASCII-armoured.</span>
<span class="c"># If so it will be saved with an ".asc" extension, otherwise it gets a '.gpg' extension.</span>
<span class="c"># "keybox database" format is currently not supported. (see generators/60local in apt-setup's source)</span>
      
<span class="c"># By default the installer requires that repositories be authenticated</span>
<span class="c"># using a known gpg key. This setting can be used to disable that</span>
<span class="c"># authentication. Warning: Insecure, not recommended.</span>
<span class="c">#d-i debian-installer/allow_unauthenticated boolean true</span>
</code></pre></div> </div> </li> <li> <p>As seen in the procedures above, <code class="language-plaintext highlighter-rouge">allow_unauthenticated</code> is set to true, which appears to only permit the installation to START when an untrusted repo mirror is found, but the mirror will be checked again before beginning the <code class="language-plaintext highlighter-rouge">apt-setup</code> phase, which <code class="language-plaintext highlighter-rouge">allow_unauthenticated</code> will not override.</p> <ul> <li> <p>This means that the <code class="language-plaintext highlighter-rouge">debian-installer</code> also requires the local APT mirror to be defined using the <code class="language-plaintext highlighter-rouge">d-i apt-setup/local0/repository</code> &amp; <code class="language-plaintext highlighter-rouge">d-i apt-setup/local0/key</code> preseed options in order for the PXE client to retrieve the public GPG key for the repo mirror and use it to validate the mirror, which seems to be configured properly through the preseed from Cobbler, verified with the following commands on the <code class="language-plaintext highlighter-rouge">debian-installer</code> system (and obviously can be done, since the workaround provided in this guide does essentially the same thing):</p> <div class="language-shell highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>  debconf-get apt-setup/local0/repository
  debconf-get apt-setup/local0/key
  less /var/lib/preseed/log
  <span class="nb">cat</span> /var/log/syslog | <span class="nb">grep</span> <span class="s2">"GPG error"</span>
  <span class="nb">cat</span> /var/lib/cdebconf/templates.dat | <span class="nb">grep </span>apt-setup
  <span class="nb">cat</span> /var/lib/cdebconf/questions.dat | <span class="nb">grep </span>apt-setup
</code></pre></div> </div> </li> <li> <p>Alternatively, the preseed comments note that you may provide the GPG key inline in the preseed file as a base64-encoded string with the format <code class="language-plaintext highlighter-rouge">d-i apt-setup/local0/key string base64://&lt;base64-encoded_key&gt;</code>, however I was not able to get this working either.</p> </li> </ul> </li> <li> <p>The snippet from Debian’s official preseed sample above mentions “see generators/60local in apt-setup’s source” and looking at some of that <a href="https://salsa.debian.org/installer-team/apt-setup/-/blob/master/generators/60local?ref_type=heads" rel="external nofollow noopener" target="_blank">source code</a>, I tried to model the workaround script as closely to the source code as possible, which is why <code class="language-plaintext highlighter-rouge">fetch-url</code> is used to download the GPG key, instead of <code class="language-plaintext highlighter-rouge">wget</code> or <code class="language-plaintext highlighter-rouge">curl</code>.</p> </li> <li> <p>This error consistenly occurs on Debian 11 &amp; 12 installations.</p> </li> </ul> </li> <li> <p>References</p> <ul> <li><a href="https://forums.debian.net/viewtopic.php?t=157991" rel="external nofollow noopener" target="_blank">https://forums.debian.net/viewtopic.php?t=157991</a></li> <li><a href="https://www.debian.org/distrib/netinst" rel="external nofollow noopener" target="_blank">https://www.debian.org/distrib/netinst</a></li> <li> <a href="https://www.debian.org/distrib/netinst#netboot" rel="external nofollow noopener" target="_blank">https://www.debian.org/distrib/netinst#netboot</a> <ul> <li><a href="https://deb.debian.org/debian/dists/bookworm/main/installer-amd64/current/images/MANIFEST" rel="external nofollow noopener" target="_blank">https://deb.debian.org/debian/dists/bookworm/main/installer-amd64/current/images/MANIFEST</a></li> </ul> </li> <li><a href="https://wiki.debian.org/PXEBootInstall" rel="external nofollow noopener" target="_blank">https://wiki.debian.org/PXEBootInstall</a></li> <li> <a href="https://wiki.debian.org/DebianInstaller" rel="external nofollow noopener" target="_blank">https://wiki.debian.org/DebianInstaller</a> <ul> <li><a href="https://wiki.debian.org/DebianInstaller/NetbootFirmware" rel="external nofollow noopener" target="_blank">https://wiki.debian.org/DebianInstaller/NetbootFirmware</a></li> <li><a href="https://wiki.debian.org/DebianInstaller/Preseed" rel="external nofollow noopener" target="_blank">https://wiki.debian.org/DebianInstaller/Preseed</a></li> </ul> </li> <li><a href="https://wiki.debian.org/DebianInstaller/NetbootAssistant" rel="external nofollow noopener" target="_blank">https://wiki.debian.org/DebianInstaller/NetbootAssistant</a></li> <li> <a href="https://www.debian.org/releases/stable/amd64/apbs03.en.html" rel="external nofollow noopener" target="_blank">https://www.debian.org/releases/stable/amd64/apbs03.en.html</a> <ul> <li><a href="https://www.debian.org/releases/bookworm/amd64/apbs03.en.html" rel="external nofollow noopener" target="_blank">https://www.debian.org/releases/bookworm/amd64/apbs03.en.html</a></li> </ul> </li> <li><a href="https://www.debian.org/releases/bookworm/amd64/ch06s03.en.html" rel="external nofollow noopener" target="_blank">https://www.debian.org/releases/bookworm/amd64/ch06s03.en.html</a></li> <li><a href="https://www.debian.org/releases/stable/amd64/ch05s04" rel="external nofollow noopener" target="_blank">https://www.debian.org/releases/stable/amd64/ch05s04</a></li> <li> <a href="https://www.debian.org/releases/stable/amd64/ch04s05" rel="external nofollow noopener" target="_blank">https://www.debian.org/releases/stable/amd64/ch04s05</a> <ul> <li><a href="https://www.debian.org/releases/stable/amd64/ch04s02.en.html#where-files" rel="external nofollow noopener" target="_blank">https://www.debian.org/releases/stable/amd64/ch04s02.en.html#where-files</a></li> </ul> </li> <li> <a href="https://wiki.debian.org/debconf" rel="external nofollow noopener" target="_blank">https://wiki.debian.org/debconf</a> <ul> <li><a href="https://packages.debian.org/bookworm/debconf-utils" rel="external nofollow noopener" target="_blank">https://packages.debian.org/bookworm/debconf-utils</a></li> </ul> </li> <li> <a href="https://wiki.debian.org/AutomatedInstallation" rel="external nofollow noopener" target="_blank">https://wiki.debian.org/AutomatedInstallation</a> <ul> <li><a href="https://fai-project.org/FAIme/" rel="external nofollow noopener" target="_blank">https://fai-project.org/FAIme/</a></li> </ul> </li> <li> <a href="https://www.debian.org/releases/stable/amd64/apbs04.en.html" rel="external nofollow noopener" target="_blank">https://www.debian.org/releases/stable/amd64/apbs04.en.html</a> <ul> <li><a href="ttps://www.debian.org/releases/bookworm/amd64/apbs04.en.html">https://www.debian.org/releases/bookworm/amd64/apbs04.en.html</a></li> <li><a href="https://www.debian.org/releases/bookworm/example-preseed.txt" rel="external nofollow noopener" target="_blank">https://www.debian.org/releases/bookworm/example-preseed.txt</a></li> <li><a href="https://www.debian.org/releases/bullseye/example-preseed.txt" rel="external nofollow noopener" target="_blank">https://www.debian.org/releases/bullseye/example-preseed.txt</a></li> <li><a href="https://www.debian.org/releases/stable/example-preseed.txt" rel="external nofollow noopener" target="_blank">https://www.debian.org/releases/stable/example-preseed.txt</a></li> <li><a href="https://preseed.debian.net/debian-preseed/bookworm/amd64-main-full.txt" rel="external nofollow noopener" target="_blank">https://preseed.debian.net/debian-preseed/bookworm/amd64-main-full.txt</a></li> </ul> </li> <li><a href="https://snapshot.debian.org/archive/debian/" rel="external nofollow noopener" target="_blank">https://snapshot.debian.org/archive/debian/</a></li> <li><a href="https://unix.stackexchange.com/questions/533539/switch-tabs-in-debian-installer-over-serial-console-with-putty" rel="external nofollow noopener" target="_blank">https://unix.stackexchange.com/questions/533539/switch-tabs-in-debian-installer-over-serial-console-with-putty</a></li> <li><a href="https://cobbler.github.io/blog/2024/06/30/libvirt-ipxe.html" rel="external nofollow noopener" target="_blank">https://cobbler.github.io/blog/2024/06/30/libvirt-ipxe.html</a></li> <li><a href="https://lists.debian.org/debian-boot/2016/07/msg00199.html" rel="external nofollow noopener" target="_blank">https://lists.debian.org/debian-boot/2016/07/msg00199.html</a></li> <li><a href="https://wiki.debian.org/MacBook#Debian_installation" rel="external nofollow noopener" target="_blank">https://wiki.debian.org/MacBook#Debian_installation</a></li> <li><a href="https://wiki.debian.org/DebianInstaller/ReleaseProcess" rel="external nofollow noopener" target="_blank">https://wiki.debian.org/DebianInstaller/ReleaseProcess</a></li> <li><a href="https://wiki.debian.org/DebianInstaller/Debconf11Summary" rel="external nofollow noopener" target="_blank">https://wiki.debian.org/DebianInstaller/Debconf11Summary</a></li> <li><a href="https://wiki.debian.org/Debian_Systems_Administration_for_non-Debian_SysAdmins?action=show&amp;redirect=Debian_SystemAdministration_for_non-Debian_SysAdmins" rel="external nofollow noopener" target="_blank">https://wiki.debian.org/Debian_Systems_Administration_for_non-Debian_SysAdmins?action=show&amp;redirect=Debian_SystemAdministration_for_non-Debian_SysAdmins</a></li> <li><a href="https://ftp.debian.org/debian/" rel="external nofollow noopener" target="_blank">https://ftp.debian.org/debian/</a></li> <li><a href="https://www.debian.org/mirror/ftpmirror" rel="external nofollow noopener" target="_blank">https://www.debian.org/mirror/ftpmirror</a></li> <li> <a href="https://www.debian.org/mirror/list" rel="external nofollow noopener" target="_blank">https://www.debian.org/mirror/list</a> <ul> <li><a href="https://www.debian.org/mirror/list-full" rel="external nofollow noopener" target="_blank">https://www.debian.org/mirror/list-full</a></li> </ul> </li> <li><a href="https://www.debian.org/releases/" rel="external nofollow noopener" target="_blank">https://www.debian.org/releases/</a></li> <li><a href="https://www.debian.org/distrib/archive" rel="external nofollow noopener" target="_blank">https://www.debian.org/distrib/archive</a></li> <li><a href="https://help.ubuntu.com/community/Debmirror" rel="external nofollow noopener" target="_blank">https://help.ubuntu.com/community/Debmirror</a></li> <li> <a href="https://github.com/cobbler/cobbler/issues/2437" rel="external nofollow noopener" target="_blank">https://github.com/cobbler/cobbler/issues/2437</a> <ul> <li> <a href="https://wiki.debian.org/SecureApt" rel="external nofollow noopener" target="_blank">https://wiki.debian.org/SecureApt</a> <ul> <li> <a href="https://wiki.debian.org/DebianKeyring" rel="external nofollow noopener" target="_blank">https://wiki.debian.org/DebianKeyring</a> <ul> <li><a href="https://ftp-master.debian.org/keys.html" rel="external nofollow noopener" target="_blank">https://ftp-master.debian.org/keys.html</a></li> <li><a href="https://keyring.debian.org/" rel="external nofollow noopener" target="_blank">https://keyring.debian.org/</a></li> <li><a href="https://db.debian.org/" rel="external nofollow noopener" target="_blank">https://db.debian.org/</a></li> </ul> </li> <li> <a href="https://www.reddit.com/r/debian/comments/yusdca/how_do_i_find_the_correct_debian_public_key/" rel="external nofollow noopener" target="_blank">https://www.reddit.com/r/debian/comments/yusdca/how_do_i_find_the_correct_debian_public_key/</a> <ul> <li><a href="https://www.debian.org/CD/verify" rel="external nofollow noopener" target="_blank">https://www.debian.org/CD/verify</a></li> </ul> </li> </ul> </li> <li><a href="https://serverfault.com/questions/669809/sync-ubuntu-repository-with-cobbler-server-fails" rel="external nofollow noopener" target="_blank">https://serverfault.com/questions/669809/sync-ubuntu-repository-with-cobbler-server-fails</a></li> <li> <a href="https://forums.debian.net/viewtopic.php?t=112820" rel="external nofollow noopener" target="_blank">https://forums.debian.net/viewtopic.php?t=112820</a> <ul> <li><a href="https://debian-handbook.info/browse/wheezy/sect.package-authentication.html" rel="external nofollow noopener" target="_blank">https://debian-handbook.info/browse/wheezy/sect.package-authentication.html</a></li> </ul> </li> <li><a href="https://serverfault.com/questions/337278/debian-how-can-i-securely-get-debian-archive-keyring-so-that-i-can-do-an-apt-g" rel="external nofollow noopener" target="_blank">https://serverfault.com/questions/337278/debian-how-can-i-securely-get-debian-archive-keyring-so-that-i-can-do-an-apt-g</a></li> <li><a href="https://ubuntuforums.org/archive/index.php/t-2217665.html" rel="external nofollow noopener" target="_blank">https://ubuntuforums.org/archive/index.php/t-2217665.html</a></li> </ul> </li> </ul> </li> </ol> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/Cobbler-v3.3.7-Windows-Deployment-Guide/">Cobbler (v3.3.7) Windows Deployment Guide</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Cobbler-v3.3.7-XCP-ng-Deployment-Guide/">Cobbler (v3.3.7) XCP-ng Deployment Guide</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Cobbler-v3.3.7-Ubuntu-Deployment-Guide/">Cobbler (v3.3.7) Ubuntu Deployment Guide</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Cobbler-v3.3.7-OpenSUSE-Deployment-Guide/">Cobbler (v3.3.7) OpenSUSE Deployment Guide</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Cobbler-v3.3.6-Beginners-Guide/">Cobbler v3.3.6 Beginner's Guide</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Shane Logan. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-blog",title:"blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"nav-publications",title:"publications",description:"publications by categories in reversed chronological order. generated by jekyll-scholar.",section:"Navigation",handler:()=>{window.location.href="/publications/"}},{id:"nav-projects",title:"projects",description:"A growing collection of your cool projects.",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"nav-repositories",title:"repositories",description:"Edit the `_data/repositories.yml` and change the `github_users` and `github_repos` lists to include your own GitHub profile and repositories.",section:"Navigation",handler:()=>{window.location.href="/repositories/"}},{id:"nav-cv",title:"cv",description:"This is a description of the page. You can modify it in '_pages/cv.md'. You can also change or remove the top pdf download button.",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"dropdown-publications",title:"publications",description:"",section:"Dropdown",handler:()=>{window.location.href=""}},{id:"dropdown-projects",title:"projects",description:"",section:"Dropdown",handler:()=>{window.location.href=""}},{id:"dropdown-blog",title:"blog",description:"",section:"Dropdown",handler:()=>{window.location.href="/blog/"}},{id:"post-cobbler-v3-3-7-windows-deployment-guide",title:"Cobbler (v3.3.7) Windows Deployment Guide",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/Cobbler-v3.3.7-Windows-Deployment-Guide/"}},{id:"post-cobbler-v3-3-7-xcp-ng-deployment-guide",title:"Cobbler (v3.3.7) XCP-ng Deployment Guide",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/Cobbler-v3.3.7-XCP-ng-Deployment-Guide/"}},{id:"post-cobbler-v3-3-7-ubuntu-deployment-guide",title:"Cobbler (v3.3.7) Ubuntu Deployment Guide",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/Cobbler-v3.3.7-Ubuntu-Deployment-Guide/"}},{id:"post-cobbler-v3-3-7-opensuse-deployment-guide",title:"Cobbler (v3.3.7) OpenSUSE Deployment Guide",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/Cobbler-v3.3.7-OpenSUSE-Deployment-Guide/"}},{id:"post-cobbler-v3-3-7-debian-deployment-guide",title:"Cobbler (v3.3.7) Debian Deployment Guide",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/Cobbler-v3.3.7-Debian-Deployment-Guide/"}},{id:"post-cobbler-v3-3-6-beginner-39-s-guide",title:"Cobbler v3.3.6 Beginner's Guide",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/Cobbler-v3.3.6-Beginners-Guide/"}},{id:"news-a-simple-inline-announcement",title:"A simple inline announcement.",description:"",section:"News"},{id:"news-a-long-announcement-with-details",title:"A long announcement with details",description:"",section:"News",handler:()=>{window.location.href="/news/announcement_2/"}},{id:"news-a-simple-inline-announcement-with-markdown-emoji-sparkles-smile",title:'A simple inline announcement with Markdown emoji! <img class="emoji" title=":sparkles:" alt=":sparkles:" src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png" height="20" width="20"> <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20">',description:"",section:"News"},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%73%68%61%6E%65%6C%6F%67%61%6E%34%36%38@%67%6D%61%69%6C.%63%6F%6D","_blank")}},{id:"socials-google-scholar",title:"Google Scholar",section:"Socials",handler:()=>{window.open("https://scholar.google.com/citations?user=qc6CJjYAAAAJ","_blank")}},{id:"socials-rss",title:"RSS Feed",section:"Socials",handler:()=>{window.open("/feed.xml","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>